<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Libro de Reclamaciones</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <style>

        /* Estilos adicionales personalizados */
        #loader {
            position: fixed;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(255, 255, 255, 0.7);
            z-index: 9999;
            display: flex;
            flex-direction: column; /* Cambiar la dirección a columna */
            justify-content: center;
            align-items: center;
        }

        #loading-text {
            margin-top: 10px; /* Espacio entre el spinner y el texto */
            font-size: 18px;
            color: #333; /* Color del texto */
            font-weight: bold;
        }

        .header {
            background-color: red;
            color: white;
            padding: 10px;
            text-align: center;
        }
        .container {
            /* background-color: white; */
            padding: 20px;
            margin-top: 20px;
            border-radius: 5px;
            
        }

        .form-section1 {
            background-color: transparent;
            padding: 20px;
            border-radius: 5px;
        }

        .form-section1 h5 {
            color: rgb(0, 0, 0);
        }
        .form-section1 h4 {
            color: rgb(0, 0, 0);
        }

        .form-section2 {
            background-color: #f0f0f0;
            padding: 20px;
            border-radius: 5px;
        }
        .form-section2 h5 {
            color: rgb(0, 0, 0);
        }

        .form-section3 {
            background-color: #f0f0f0;
            padding: 20px;
            border-radius: 5px;
        }
        .form-section3 h5 {
            color: rgb(0, 0, 0);
        }
        .form-section3 h4 {
            text-align: center;
            color: rgb(0, 0, 0);
        }



        .custom-select {
            border: 1px solid #ddd;
            border-radius: 0;
        }

        .custom-select:focus {
            border-color: #ddd;
            box-shadow: none;
        }

        .input-group-prepend .custom-select {
            border-top-right-radius: 0;
            border-bottom-right-radius: 0;
        }

        .input-group .form-control {
            border-top-left-radius: 0;
            border-bottom-left-radius: 0;
        }

        .input-group .form-control:focus {
            z-index: 1;
            border-color: #ddd;
            box-shadow: none;
        }


        .btnContinuarHome {
            margin-top: 1rem; /* Usar rem para que sea proporcional al tamaño base del font */
            padding: 0.9rem 2.5rem; /* Padding más simplificado */
            border-radius: 1.55rem; /* Borde redondeado, también en rem */
            font-size: 1.25rem; /* Tamaño de fuente más grande para mejor lectura en móviles */
            background-color: red; /* Color de fondo */
            border: none; /* Sin borde */
            color: white; /* Texto blanco para mayor contraste */
            transition: background-color 0.3s; /* Efecto de transición suave al cambiar de estado */
        }

        .btnContinuarHome:hover {
            background-color: darkred; /* Color más oscuro al pasar el mouse para mejor feedback */
        }

        .form-page{
            padding: 20px;
            border-radius: 5px;
        }
        
        .custom-checkbox {
            display: none; /* Hide the default checkbox */
        }

        .custom-checkbox + .form-check-label {
            position: relative;
            padding-left: 30px;
            cursor: pointer;
        }

        .custom-checkbox + .form-check-label::before {
            content: "";
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid red; /* Red border */
            position: absolute;
            left: 0;
            top: 0;
            border-radius: 0;
            background-color: white; /* White background */
        }

        .custom-checkbox:checked + .form-check-label::before {
            background-color: red; /* Red background when checked */
        }

        .custom-checkbox:checked + .form-check-label::after {
            content: "";
            display: inline-block;
            width: 6px;
            height: 12px;
            border: solid white;
            border-width: 0 2px 2px 0;
            position: absolute;
            left: 7px;
            top: 3px;
            transform: rotate(45deg);
        }

        .btn_atras{
            background-color: red;
            color: white;
            border: none;
            padding-right: 30px;
            padding-left: 30px;
            padding-top: 10px;
            padding-bottom: 10px;
            font-size: 1rem;
            cursor: pointer;
            border-radius: 20px;
            font-weight: bold;
        }

        .btn_atras img {
            width: 1rem;
            margin-right: 7px;
            border-radius: 20px;
        }
        .btn_siguiente
        {
            background-color: red;
            color: white;
            border: none;
            padding-right: 30px;
            padding-left: 30px;
            padding-top: 10px;
            padding-bottom: 10px;
            font-size: 1rem;
            cursor: pointer;
            border-radius: 20px;
            font-weight: bold;
        }
        .btn_siguiente img {
            width: 1rem;
            margin-left: 7px;
            border-radius: 20px;
        }

        
        .nav-link:hover {
            color: black;
        }

        .nav-link {
            color: gray;
            font-weight: bold;

            border-radius: 50px;
            position: relative;
            z-index: 1;
            margin-right: 0;
            padding: 10px 20px;
            background-color: #F0F0F0;
        }
        .nav-pills .nav-link {
            border-radius: 50px;
            position: relative;
            z-index: 1;
            margin-right: 0;
            padding: 10px 20px;
            background-color: #F0F0F0;
        }
        .nav-pills .nav-link.active {
            background-color: red;
            color: white;
            font-weight: bold;
        }
        .nav-pills .nav-link::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 100%;
            transform: translateY(-50%);
            width: 20px;
            height: 2px;
            background-color: red;
            z-index: -1;
        }
        .nav-pills .nav-link:last-child::after {
            content: none;
        }
        .nav-connector {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .nav-connector::after {
            content: '';
            width: 20px;
            height: 2px;
            background-color: #d9534f;
            margin: 0 10px;
        }


        .tipoCaso-checkbox {
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: nowrap;
            border: 2px solid #E0E0E0;
            border-radius: 25px;
            padding: 5px 15px;
            background-color: white;
            cursor: pointer;
            user-select: none;
            max-width: 200px; /* Tamaño máximo del contenedor */
        }

        .tipoCaso-checkbox input[type="checkbox"] {
            display: none;
        }

        .tipoCaso-checkbox .checkbox-icon {
            background-color: white;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 24px;
            height: 24px;
            margin-left: 45px; /* Aumenta el margen para más espacio */
            border: 2px solid #E0E0E0;
            flex-shrink: 0;
        }

        .tipoCaso-checkbox input[type="checkbox"]:checked + .checkbox-icon {
            background-color: red;
            color: white;
            border-color: red;
        }

        .tipoCaso-checkbox input[type="checkbox"]:checked + .checkbox-icon svg {
            display: block;
        }

        .tipoCaso-checkbox input[type="checkbox"]:checked ~ .label-text {
            color: red;
        }

        .tipoCaso-checkbox .checkbox-icon svg {
            display: none;
        }
        .label-text {
            flex-grow: 1;
        }

        #file-list {
            list-style: none; /* Remueve los marcadores de lista */
            padding: 0;
            margin-top: 10px;
        }

        #file-list li {
            background-color: #f1f1f1;
            padding: 5px 10px; /* Añadido padding a la derecha e izquierda */
            border: none;
            margin-bottom: 5px;
            position: relative;
            display: flex; /* Asegura que los contenidos de li se alineen correctamente */
            align-items: center; /* Centra los elementos verticalmente */
            overflow: hidden;/* Oculta cualquier contenido que se desborde */
            font-size: 0.7rem;
        }

        #file-list li::before {
            content: '•'; /* Usamos un pseudo-elemento para el marcador */
            color: red; /* Puedes cambiar el color del marcador */
            margin-right: 10px; /* Espacio entre el marcador y el texto */
            flex-shrink: 0; /* Previene que el marcador se escale */
        }

        #file-list li span {
            flex-grow: 1; /* Permite que el texto ocupe todo el espacio disponible */
            margin-right: 30px; /* Espacio para el botón de eliminar */
            white-space: nowrap; /* Evita que el texto se envuelva */
            overflow: hidden; /* Oculta el texto que se desborde */
            text-overflow: ellipsis; /* Añade puntos suspensivos si el texto se desborda */
        }

        #file-list li button {
            position: absolute;
            right: 0;
            top: 50%;
            transform: translateY(-50%);
            background-color: transparent;
            border: none;
            cursor: pointer;

        }
        #file-list li button img {
            height: 16px; /* or any size you want */
            width: auto;
        }

        .container-banner {
            background-color: grey;
            padding: 20px;
        }

         /* Cambiar el color del icono de éxito */
         .swal2-icon.swal2-success .swal2-success-ring {
            border-color: red; /* Cambia el color del borde del círculo */
        }

        .swal2-icon.swal2-success [class^=swal2-success-line] {
            background-color: red; /* Cambia el color del fondo del tick */
        }

        .swal2-show
        {
            border: 2px solid black;
        }

    </style>
</head>
<body>
    <div id="loader">
        <div class="spinner-border text-danger" role="status">
            <span class="sr-only"></span>
        </div>
        <div id="loading-text">Cargando información...</div>
    </div>

    <div class="container mt-5">
        <div class="header">
            <h1>Libro de Reclamaciones</h1>
        </div>
        <div class="row" id="home-page">
            <div class="col-md-8">
                <div class="form-section1">
                    <h6>Toma en cuenta lo siguiente para registrar correctamente tu reclamo o queja:</h6>
                </div>
            </div>

            <div class="col-md-8">
                <div class="form-section2">
                    <h5>¿Qué es un reclamo?</h5>
                    <p>Disconformidad relacionada a los productos o servicios brindados.</p>
                    <h5>¿Qué es un una queja?</h5>
                    <p>Malestar o descontento respecto a la atención al público.</p>
                    <h5>Plazo de atención</h5>
                    <p>Quince (15) días hábiles. El Plazo podrá extenderse previa comunicación explicando las razones así como el nuevo plazo estimado de respuesta.</p>
                    <h5>Documentos probatorios</h5>
                    <p>Si necesitas añadir documentación del sustento de tu reclamo, deberás cargarlos en el apartado “Documentos adjuntos”.</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="form-section3">
                    <h4>Identifícate ingresando tu número de documento</h4><br>
                    <p>Recuerda que si representas a una persona jurídica, debes ingresar con el RUC de la empresa.</p>
                    <div class="form-group">
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <select class="custom-select" id="tipoDoc" style="width: 140px; height:40px;">
                                </select>
                            </div>
                            <input type="text" class="form-control"id="nroDoc" aria-label="Ingresar número de documento">
                        </div>
                    </div>
                    <div style="text-align: center;">
                        <button type="button" onclick="continuarProceso()" class="btn btnContinuarHome" id="btnContinuarHome" disabled>Continuar</button>
                    </div>
                </div>
            </div>
        </div>
        <div class="row form-page" id="form-page">
            <div class="col-md-12">
                <ul class="nav nav-pills justify-content-center mb-4" id="pills-tab" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active" id="pills-datos-personales-tab" data-bs-toggle="" data-bs-target="" type="button" role="tab" aria-controls="pills-datos-personales" aria-selected="true">1. Datos Personales</button>
                    </li>
                    <div class="nav-connector"></div>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="pills-datos-contacto-tab" data-bs-toggle="" data-bs-target="" type="button" role="tab" aria-controls="pills-datos-contacto" aria-selected="false">2. Datos de Contacto</button>
                    </li>
                    <div class="nav-connector"></div>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="pills-identificacion-tab" data-bs-toggle="" data-bs-target="" type="button" role="tab" aria-controls="pills-identificacion" aria-selected="false">3. Identificación de la queja o reclamo</button>
                    </li>
                    <div class="nav-connector"></div>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="pills-resumen-tab" data-bs-toggle="" data-bs-target="" type="button" role="tab" aria-controls="pills-resumen" aria-selected="false">4. Resumen</button>
                    </li>
                </ul>
            </div>

            <!-- <div class="card-body"> -->
                
                <div class="needs-validation was-validated tab-content col-md-12" id="pills-tabContent" novalidate>
                    <div class="tab-pane fade show active" id="pills-datos-personales" role="tabpanel" aria-labelledby="pills-datos-personales-tab" >
                    
                        <div class="col-md-8" id="tipoRuc">
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="tipoDocRuc" class="form-label">Tipo de documento*</label>
                                        <input type="text" class="form-control" id="tipoDocRuc" placeholder="" disabled required>
                                        <div class="invalid-feedback">
                                            El tipo de documento es obligatorio.
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="nroDocRuc" class="form-label">Número de documento*</label>
                                        <input type="text" class="form-control" id="nroDocRuc" placeholder="" disabled required>
                                        <div class="invalid-feedback">
                                            El número de documento es obligatorio.
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-8">
                                    <div class="mb-3">
                                        <label for="razonSocialRuc" class="form-label">Razón social*</label>
                                        <input type="text" class="form-control" id="razonSocialRuc" placeholder="" disabled required>
                                        <div class="invalid-feedback">
                                            La razón social es obligatorio.
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-8" id="tipoEdad">
                            <div class="mb-3">
                                <label for="miCheckbox">¿Es menor de edad?</label>
                                <div class="form-check">
                                    <input class="form-check-input custom-checkbox" type="checkbox" id="checkboxSi">
                                    <label class="form-check-label mr-3" for="checkboxSi">
                                        Sí
                                    </label>

                                    <input class="form-check-input custom-checkbox" type="checkbox" id="checkboxNo">
                                    <label class="form-check-label" for="checkboxNo">
                                        No
                                    </label>
                                </div>
                                    
                            </div>
                        </div>
                        
                        <div class="col-md-8" >
                            <div class="row" id="tipoSoli" >
                                <div class="col-md-12">
                                    <div class="mb-3">
                                        <h5 class="text-danger" id="tipoContacto">Del solicitante</h5>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="tipoDocSoli" class="form-label">Tipo de documento*</label>
                                        <input type="text" class="form-control" id="tipoDocSoli" placeholder="" disabled required>
                                        <div class="invalid-feedback">
                                            El tipo de documento es obligatorio.
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="nroDocSoli" class="form-label">Número de documento*</label>
                                        <input type="text" class="form-control" id="nroDocSoli" placeholder="" disabled required>
                                        <div class="invalid-feedback">
                                            El número de documento es obligatorio.
                                        </div>
                                    </div>
                                </div>
                            

                            
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="nombresSoli" class="form-label">Nombres*</label>
                                        <input type="text" class="form-control" id="nombresSoli" placeholder="" disabled required>
                                        <div class="invalid-feedback">
                                            Los nombres son obligatorios.
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="primerApeSoli" class="form-label">Primer apellido*</label>
                                        <input type="text" class="form-control" id="primerApeSoli" placeholder="" disabled required>
                                        <div class="invalid-feedback">
                                            El primer apellido es obligatorio.
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="segundoApeSoli" class="form-label">Segundo apellido*</label>
                                        <input type="text" class="form-control" id="segundoApeSoli" placeholder="" disabled required>
                                        <div class="invalid-feedback">
                                            El segundo apellido es obligatorio.
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row" id="formApoderado">
                                <div class="col-md-12">
                                    <div class="mb-3">
                                        <h5 class="text-danger" id="tipoApoderado">Del apoderado</h5>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="tipoDocApod" class="form-label">Tipo de documento*
                                        </label>
                                        <select class="form-select" id="tipoDocApod" required>
                                        </select>
                                        <div class="invalid-feedback">El tipo de documento es obligatoria.</div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="nroDocApod" class="form-label">Número de documento*</label>
                                        <input type="text" class="form-control" id="nroDocApod" placeholder="" required>
                                        <div class="invalid-feedback">
                                            El número de documento es obligatorio.
                                        </div>
                                    </div>
                                </div>

                                <div class="col-md-6" id="parentescoHab">
                                    <div class="mb-3">
                                        <label for="parentescoApod" class="form-label">Parentesco*</label>
                                        <input type="text" class="form-control" id="parentescoApod" placeholder="" required>
                                        <div class="invalid-feedback">
                                            El parentesco es obligatorio.
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="nombresApod" class="form-label">Nombres*</label>
                                        <input type="text" class="form-control" id="nombresApod" placeholder="" required>
                                        <div class="invalid-feedback">
                                            Los nombres son obligatorios.
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="primerApeApod" class="form-label">Primer apellido*</label>
                                        <input type="text" class="form-control" id="primerApeApod" placeholder="" required>
                                        <div class="invalid-feedback">
                                            El primer apellido es obligatorio.
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="segundoApeApod" class="form-label">Segundo apellido*</label>
                                        <input type="text" class="form-control" id="segundoApeApod" placeholder="" required>
                                        <div class="invalid-feedback">
                                            El segundo apellido es obligatorio.
                                        </div>
                                    </div>
                                </div>
                            
                                <div class="col-md-12">
                                    <div class="mb-4">
                                        <h6>Validar los datos y luego dar click en botón "Continuemos".</h6>
                                    </div>
                                </div>
                            </div>
                            
                        </div>
                    </div>
                    <div class="tab-pane fade" id="pills-datos-contacto" role="tabpanel" aria-labelledby="pills-datos-contacto-tab">
                        <!-- Contenido de Datos de Contacto -->
                         <div class="col-md-12">
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="mb-3">
                                        <label for="envioCorreoContacto" class="form-label">Medio elegido para envío de respuesta*
                                        </label>
                                        <select class="form-select" id="envioCorreoContacto" change required>
                                            <option value="1" name="correo">Correo electrónico</option>
                                            <option value="2" name="direccion">Dirección de domicilio</option>
                                        </select>
                                        <div class="invalid-feedback">El medio de envío es obligatorio.</div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="mb-3">
                                        <label for="correoContacto" class="form-label">Email*</label>
                                        <input type="email" class="form-control" id="correoContacto" placeholder="" required>
                                        <div class="invalid-feedback">El email es obligatorio.</div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="mb-3">
                                        <label for="telefonoContacto" class="form-label">Teléfono o Celular*</label>
                                        <input type="text" class="form-control" id="telefonoContacto" placeholder="" required>
                                        <div class="invalid-feedback">El teléfono o celular es obligatorio.</div>
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-4">
                                    <div class="mb-3">
                                        <label for="departamento" class="form-label">Departamento*
                                        </label>
                                        <select class="form-select" id="departamento" required>
                                        </select>
                                        <div class="invalid-feedback">El departamento es obligatorio.</div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="mb-3">
                                        <label for="provincia" class="form-label">Provincia*</label>
                                        <select class="form-select" id="provincia" required>
                                        </select>
                                        <div class="invalid-feedback">La provincia es obligatoria.</div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="mb-3">
                                        <label for="distrito" class="form-label">Distrito*</label>
                                        <select class="form-select" id="distrito" required>
                                        </select>
                                        <div class="invalid-feedback">El distrito es obligatorio.</div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="mb-3">
                                        <label for="direccion" class="form-label">Dirección actual*</label>
                                        <input type="text" class="form-control" id="direccion" placeholder="Datos obligatorios" required>
                                        <div class="invalid-feedback">La dirección actual es obligatoria.</div>
                                    </div>
                                </div> 
                            </div>
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="mb-3">
                                        <label for="referencia" class="form-label">Referencia <span id="refValid">*</span></label>
                                        <input type="text" class="form-control" id="referencia" placeholder="" required>
                                        <div class="invalid-feedback">La referencia es obligatoria.</div>
                                    </div>
                                </div> 
                                <div class="col-md-12">
                                    <div class="mb-4">
                                        <h6>Validar los datos y luego dar click en botón "Continuemos".</h6>
                                    </div>
                                </div>
                            </div>
                         </div>
                    </div>
                    <div class="tab-pane fade" id="pills-identificacion" role="tabpanel" aria-labelledby="pills-identificacion-tab">
                        <div class="col-md-12">
                            <div class="row">
                                
                                <div class="col-md-4">
                                    <label  class="form-label">Tipo de caso*</label>
                                    <div style="display: flex; gap: 10px;">
                                        <label class="tipoCaso-checkbox">
                                            <span class="label-text">Reclamo</span>
                                            <input type="checkbox" id="reclamo-checkbox">
                                            <span class="checkbox-icon">
                                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-check" viewBox="0 0 16 16">
                                                    <path d="M13.485 1.929a.75.75 0 0 1 1.06 1.06l-8 8a.75.75 0 0 1-1.06 0l-4-4a.75.75 0 0 1 1.06-1.06L6 9.439l7.485-7.51z"/>
                                                </svg>
                                            </span>
                                        </label>
                                        <label class="tipoCaso-checkbox">
                                            <span class="label-text">Queja</span>
                                            <input type="checkbox" id="queja-checkbox">
                                            <span class="checkbox-icon">
                                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-check" viewBox="0 0 16 16">
                                                    <path d="M13.485 1.929a.75.75 0 0 1 1.06 1.06l-8 8a.75.75 0 0 1-1.06 0l-4-4a.75.75 0 0 1 1.06-1.06L6 9.439l7.485-7.51z"/>
                                                </svg>
                                            </span>
                                        </label>
                                    </div>
                                    
                                </div>
                                <div class="col-md-8">
                                    <div class="mb-3">
                                        <label for="tipoProducto" class="form-label">Tipo de producto*</label>
                                        <select class="form-select" id="tipoProducto" required>
                                            <option selected="" disabled="" value="">Seleccionar</option>
                                            <option value="460710000">Crédito vehicular</option>
                                            <option value="460710001">Leasing</option>
                                            <option value="460710002">Crédito de consumo</option>
                                            <option value="460710003">Otros</option>
                                        </select>
                                        <div class="invalid-feedback">El tipo de producto es obligatorio.</div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="motivo" class="form-label">Motivo*</label>
                                        <select class="form-select" id="motivo" required>
                                        </select>
                                        <div class="invalid-feedback">El motivo es obligatorio.</div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="subMotivo" class="form-label">Sub motivo*</label>
                                        <select class="form-select" id="subMotivo" required>
                                        </select>
                                        <div class="invalid-feedback">El sub motivo es obligatorio.</div>
                                    </div>
                                </div>
                                <div class="col-md-12">
                                    <div class="mb-3">
                                        <label for="detalleReclamo" class="form-label">Detalle del reclamo o queja*</label>
                                        <textarea style="height: 15vh" class="form-control" name="detalleReclamo" id="detalleReclamo" placeholder="Datos obligatorios" required></textarea>
                                        <div class="invalid-feedback">El detalle de reclamo o queja es obligatorio.</div>
                                    </div>
                                </div>
                                <div class="col-md-12">
                                    <div class="mb-3">
                                        <label for="pedidosReclamo" class="form-label">Pedidos del reclamante*</label>
                                        <textarea style="height: 15vh" class="form-control" name="pedidosReclamo" id="pedidosReclamo" placeholder="Datos obligatorios" required></textarea>
                                        <div class="invalid-feedback">Los pedidos del reclamante son obligatorios.</div>
                                    </div>
                                </div>

                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <h5 style="color: red; font-weight: bold">Documentos Adjuntos</h5>
                                        <p style="font-size: 0.8rem">
                                            Puedes adjuntar vouchers, estados de cuenta, imágenes u otros documentos para sustentar tu caso.
                                        </p>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="custom-file-container" style="position: relative;">
                                        <input type="file" id="DocumentFiles" name="DocumentFiles" multiple="" style="opacity: 0; position: absolute; left: 0; top: 0; width: 100%; height: 100%; cursor: pointer;"/>
                                        <button type="button" id="customButton" style="width: 100%; border: none; border-radius: 5px; font-size: 1rem; padding-bottom: 10px; padding-top: 10px;font-weight: normal; background-color: red; color: white; font-weight: bold;">Adjuntar documentos <img src="https://i.imgur.com/fYK08ph.png" style="width: 1rem; float: right; margin-right: 1rem; margin-top: 0.2rem; filter: invert(100%);"></button>
                                    </div>

                                    <p style="font-size: 0.7rem; margin-top: 10px; text-align: justify">*Máximo 10 archivos de 30 MB cada uno.</br>*Los formatos permitidos son PNG, JPEG, GIF, DOCX, XLS, XLSX, PDF.</p>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <ul id="file-list"></ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="tab-pane fade" id="pills-resumen" role="tabpanel" aria-labelledby="pills-resumen-tab">
                       <div class="row">
                            <div class="mb-3 row">
                                <label for="tipoDocR" class="col-sm-4 col-form-label">Tipo de documento*</label>
                                <div class="col-sm-5">
                                <input type="text" class="form-control" id="tipoDocR" disabled>
                                </div>
                            </div>
                            <div class="mb-3 row">
                                <label for="nroDocR" class="col-sm-4 col-form-label">Número de documento*</label>
                                <div class="col-sm-5">
                                <input type="text" class="form-control" id="nroDocR" disabled>
                                </div>
                            </div>
                            <div class="mb-3 row">
                                <label for="nomApeRazonSR" class="col-sm-4 col-form-label">Nombres y apellidos / Razón Social*</label>
                                <div class="col-sm-5">
                                <input type="text" class="form-control" id="nomApeRazonSR" disabled>
                                </div>
                            </div>
                            
                            <div class="mb-3 row" id="tipoDoc2HabR">
                                <label for="tipoDoc2R" class="col-sm-4 col-form-label">Tipo de documento*</label>
                                <div class="col-sm-5">
                                <input type="text" class="form-control" id="tipoDoc2R" disabled>
                                </div>
                            </div>
                            <div class="mb-3 row" id="nroDoc2HabR">
                                <label for="nroDoc2R" class="col-sm-4 col-form-label">Número de documento*</label>
                                <div class="col-sm-5">
                                <input type="text" class="form-control" id="nroDoc2R" disabled>
                                </div>
                            </div>
                            <div class="mb-3 row" id="parentescoHabR">
                                <label for="parentescoR" class="col-sm-4 col-form-label">Parentesco*</label>
                                <div class="col-sm-5">
                                <input type="text" class="form-control" id="parentescoR" disabled>
                                </div>
                            </div>
                            <div class="mb-3 row" id="nomApeRazonS2HabR">
                                <label for="nomApeRazonS2R" class="col-sm-4 col-form-label">Nombres y apellidos / Razón Social*</label>
                                <div class="col-sm-5">
                                <input type="text" class="form-control" id="nomApeRazonS2R" disabled>
                                </div>
                            </div>
                            
                            <div class="mb-3 row">
                                <label for="envioCorreoR" class="col-sm-4 col-form-label">Medio elegido para envío de respuesta*</label>
                                <div class="col-sm-5">
                                <input type="text" class="form-control" id="envioCorreoR" disabled>
                                </div>
                            </div>
                            <div class="mb-3 row">
                                <label for="correoR" class="col-sm-4 col-form-label">Email*</label>
                                <div class="col-sm-5">
                                <input type="text" class="form-control" id="correoR" disabled>
                                </div>
                            </div>
                            <div class="mb-3 row">
                                <label for="telfR" class="col-sm-4 col-form-label">Telefono o Celular*</label>
                                <div class="col-sm-5">
                                <input type="text" class="form-control" id="telfR" disabled>
                                </div>
                            </div>
                            <div class="mb-3 row">
                                <label for="departamentoR" class="col-sm-4 col-form-label">Departamento*</label>
                                <div class="col-sm-5">
                                <input type="text" class="form-control" id="departamentoR" disabled>
                                </div>
                            </div>
                            <div class="mb-3 row">
                                <label for="provinciaR" class="col-sm-4 col-form-label">Provincia*</label>
                                <div class="col-sm-5">
                                <input type="text" class="form-control" id="provinciaR" disabled>
                                </div>
                            </div>
                            <div class="mb-3 row">
                                <label for="distritoR" class="col-sm-4 col-form-label">Distrito*</label>
                                <div class="col-sm-5">
                                <input type="text" class="form-control" id="distritoR" disabled>
                                </div>
                            </div>
                            <div class="mb-3 row">
                                <label for="direccionR" class="col-sm-4 col-form-label">Dirección actual*</label>
                                <div class="col-sm-5">
                                <input type="text" class="form-control" id="direccionR" disabled>
                                </div>
                            </div>
                            <div class="mb-3 row">
                                <label for="referenciaR" class="col-sm-4 col-form-label">Referencia*</label>
                                <div class="col-sm-5">
                                <input type="text" class="form-control" id="referenciaR" disabled>
                                </div>
                            </div>
                            <div class="mb-3 row">
                                <label for="tipoCasoR" class="col-sm-4 col-form-label">Tipo de caso*</label>
                                <div class="col-sm-5">
                                <input type="text" class="form-control" id="tipoCasoR" disabled>
                                </div>
                            </div>
                            <div class="mb-3 row">
                                <label for="tipoProductoR" class="col-sm-4 col-form-label">Tipo de producto*</label>
                                <div class="col-sm-5">
                                <input type="text" class="form-control" id="tipoProductoR" disabled>
                                </div>
                            </div>
                            <div class="mb-3 row">
                                <label for="motivoR" class="col-sm-4 col-form-label">Motivo*</label>
                                <div class="col-sm-5">
                                <input type="text" class="form-control" id="motivoR" disabled>
                                </div>
                            </div>
                            <div class="mb-3 row">
                                <label for="subMotivoR" class="col-sm-4 col-form-label">Sub motivo*</label>
                                <div class="col-sm-5">
                                <input type="text" class="form-control" id="subMotivoR" disabled>
                                </div>
                            </div>
                            <div class="mb-3 row">
                                <label for="detalleReclamoR" class="col-sm-4 col-form-label">Detalle del reclamo o queja*</label>
                                <div class="col-sm-5">
                                    <textarea style="height: 15vh" class="form-control" name="detalleReclamoR" id="detalleReclamoR" placeholder="Datos obligatorios" disabled> </textarea>
                                </div>
                            </div>
                            <div class="mb-3 row">
                                <label for="pedidosReclamoR" class="col-sm-4 col-form-label">Pedido del reclamante*</label>
                                <div class="col-sm-5">
                                    <textarea style="height: 15vh" class="form-control" name="pedidosReclamoR" id="pedidosReclamoR" placeholder="Datos obligatorios" disabled> </textarea>
                                </div>
                            </div>
                            <div class="mb-3 row">
                                <label for="documentosAdjuntosR" class="col-sm-4 col-form-label">Documentos sustentarios</label>
                                <div class="col-sm-5">
                                    <span id="documentosAdjuntosR" style="margin-left: 7px"></span>
                                </div>
                            </div>
                       </div>
                       <div class="row col-md-12">
                            <div class="container-banner">

                            </div>
                       </div>
                    </div>
                    <div class="row justify-content-between mt-3">
                        <div class="col-auto">
                            <button class="btn_atras" type="button" onclick="accionVolver()"><img src="https://i.imgur.com/yAL1JdK.png">Atrás</button>
                        </div>
                        <div class="col-auto">
                            <button class="btn_siguiente" id="btnSiguiente" type="button" onclick="accionContinuar()">Siguiente<img src="https://i.imgur.com/NfgeFxw.png"></button>
                        </div>
                    </div>
                </div>
                
            <!-- </div> -->
            
            
        </div>

    </div>

    <script>
        //RUTAS
        const enviroment_url = "https://pisac.mafperu.com.pe/wa_experiencia_midleware/api";
        // const enviroment_url = "https://mafperu.com.pe/wa_experiencia_crm_vs2/api";
        //const enviroment_url = "https://localhost:44324/api";
        // const reclamo_url = "https://api-col-prod.crossnet.la/WebApiMafperu/api";
        const reclamo_url = "https://localhost:44324/api";
        const CONTACTO = {
            listar_tipo_documento: '/contacto/listartipodocumento',
            cliente_documento: '/contacto/clienteDocumento',
            cliente_documento2: '/contacto/clienteDocumento2',
            listar_motivo: '/contacto/listarmotivo',
            listar_submotivo: '/contacto/listarsubmotivo',
            adjunto: '/contacto/adjunto',
            registro_form: '/contacto/registroForm'
        }
        const RECLAMO = {
            listar_tipo_documento: '/reclamo/listartipodocumento',
            listar_departamento: '/reclamo/listardepartamento',
            listar_provincia: '/reclamo/listarprovincia',
            listar_distrito: '/reclamo/listardistrito',
            listar_motivo: '/reclamo/listarmotivo',
            listar_submotivo: '/reclamo/listarsubmotivo',
            registro_form: '/reclamo/enviarreclamo2',
            adjunto: '/reclamo/enviararchivo'
        }
        
    </script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
     
    <script>
       
        document.addEventListener("DOMContentLoaded", async function() {
            document.getElementById('form-page').style.display = 'none';
            try{
                await cargarTiposDocumento();
            }catch(error){
                console.log(error);
            }
            document.getElementById('loader').style.display = 'none';
        });
        // document.getElementById('loader').style.display = '';
        // document.getElementById('loader').style.display = 'none';

        async function cargarTiposDocumento() {
            try {
                const response = await fetch(`${reclamo_url}${RECLAMO.listar_tipo_documento}`);
                const data = await response.json();

                const select = document.getElementById('tipoDoc');
                const selectApoderado = document.getElementById('tipoDocApod');
                const optionSelected = '<option value="" selected disabled >Seleccionar</option>'; 
                select.innerHTML = optionSelected;
                selectApoderado.innerHTML = optionSelected;
                data.forEach(doc => {
                    if(doc.Codigo == 1 || doc.Codigo == 2 || doc.Codigo == 3 || doc.Codigo == 9){
                        var option = new Option(doc.Nombre, doc.Codigo);
                        var option2 = new Option(doc.Nombre, doc.Codigo);
                        select.appendChild(option);
                        selectApoderado.appendChild(option2);
                    }
                });
            }catch(error){
                console.error('Error cargando tipos de documento:', error);
            }
        }

        var tipoDoc = document.getElementById('tipoDoc');
        var nroDoc = document.getElementById('nroDoc');
        var btnContinuar = document.getElementById('btnContinuarHome');

        
        // Agregar un event listener al checkbox
        nroDoc.addEventListener('input', async function(){
            if(nroDoc.value.trim() != '' && tipoDoc.value != ''){
                btnContinuar.disabled = false;
            }else {
                btnContinuar.disabled = true;
            }
        });

        tipoDoc.addEventListener('change', async function(){
            if(nroDoc.value.trim() != '' && tipoDoc.value != ''){
                btnContinuar.disabled = false;
            }else {
                btnContinuar.disabled = true;
            }
        });

        async function showTabs(){
            document.getElementById('home-page').style.display = 'none'; // Oculta la página inicial
            document.getElementById('form-page').style.display = 'block'; // Muestra las pestañas del formulario
        }

        async function  continuarProceso(){
            try{
                document.getElementById('loader').style.display = '';
                document.getElementById('checkboxNo').checked = true;

                const tipoDoc = document.getElementById('tipoDoc');
                const tipoDocSoli = document.getElementById('tipoDocSoli');
                const tipoDocRuc = document.getElementById('tipoDocRuc');
                const tipoRuc = document.getElementById('tipoRuc');
                const tipoEdad = document.getElementById('tipoEdad');
                const tipoSoli = document.getElementById('tipoSoli');
                const formApoderado = document.getElementById('formApoderado');
                const parentescoHab = document.getElementById('parentescoHab');

                if(tipoDoc.value == "9"){ // RUC
                    const tipoApoderado = document.getElementById('tipoApoderado');
                    tipoEdad.style.display = 'none';
                    tipoSoli.style.display = 'none';
                    tipoDocRuc.value = tipoDoc.options[tipoDoc.selectedIndex].text;
                    parentescoHab.style.display = 'none';
                    tipoApoderado.innerHTML = 'Contacto';
                }else {
                    formApoderado.style.display = 'none';
                    tipoRuc.style.display = 'none';
                    tipoDocSoli.value = tipoDoc.options[tipoDoc.selectedIndex].text;
                }
                await buscarCliente();
                await showTabs();
            }finally{
                document.getElementById('loader').style.display = 'none';
            }
        }

        const checkboxSi = document.getElementById('checkboxSi');
        const checkboxNo = document.getElementById('checkboxNo');
        const formApoderado = document.getElementById('formApoderado');

        checkboxSi.addEventListener('change', async function() {
            if(checkboxSi.checked){
                formApoderado.style.display = '';
                checkboxNo.checked = false;
            }else {
                formApoderado.style.display = 'none';
                checkboxNo.checked = true;
            }
        });

        checkboxNo.addEventListener('change', async function() {
            if(checkboxNo.checked){
                formApoderado.style.display = 'none';
                checkboxSi.checked = false;
            }else {
                formApoderado.style.display = '';
                checkboxSi.checked = true;
            }
        });

        async function accionVolver(){

            const datosPersonales = document.getElementById('pills-datos-personales-tab');
            const datosContacto = document.getElementById('pills-datos-contacto-tab');
            const identificacion = document.getElementById('pills-identificacion-tab');
            const resumen = document.getElementById('pills-resumen-tab');

            const contenidoPersonales = document.getElementById('pills-datos-personales')
            const contenidoContacto = document.getElementById('pills-datos-contacto');
            const contenidoIdentificacion = document.getElementById('pills-identificacion');
            const contenidoResumen = document.getElementById('pills-resumen');

            if(contenidoPersonales.classList.contains('active')){
                window.location.reload();
            }else if(contenidoContacto.classList.contains('active')){
                datosContacto.classList.remove('active');
                datosPersonales.classList.add('active');
                contenidoContacto.classList.remove('show','active');
                contenidoPersonales.classList.add('show','active');
                
            }else if(contenidoIdentificacion.classList.contains('active')){
                identificacion.classList.remove('active');
                datosContacto.classList.add('active');
                contenidoIdentificacion.classList.remove('show','active');
                contenidoContacto.classList.add('show','active');

            }else if(contenidoResumen.classList.contains('active')){
                const btnSiguiente = document.getElementById('btnSiguiente');
                btnSiguiente.innerHTML = 'Siguiente';
                resumen.classList.remove('active');
                identificacion.classList.add('active');
                contenidoResumen.classList.remove('show','active');
                contenidoIdentificacion.classList.add('show','active');
            }
        }
        
        async function buscarCliente(){

            try{
                const documento = document.getElementById('nroDoc').value;
                const response = await fetch(`${enviroment_url}${CONTACTO.cliente_documento}?nroDocumento=${documento}`);
                const data = await response.json();
                let nombreCompleto = '';

                if(tipoDoc.value == "9"){ // SOLO PARA RUC
                    document.getElementById('nroDocRuc').value = documento;
                    if(data.Nro_documento == null){
                        document.getElementById('nroDocRuc').disabled = false;
                        document.getElementById('razonSocialRuc').disabled = false;
                    }
                    document.getElementById('razonSocialRuc').value = data.Primer_nombre;
                }else { // PROCESO NORMAL
                    document.getElementById('nroDocSoli').value = documento;
                    
                    if(data.Nro_documento == null){
                        document.getElementById('nombresSoli').disabled = false;
                        document.getElementById('nroDocSoli').disabled = false;
                        document.getElementById('primerApeSoli').disabled = false;
                        document.getElementById('segundoApeSoli').disabled = false;
                    }
                    
                    if (data.Tipo === 'Persona') {
                        nombreCompleto = data.Primer_nombre + ' ' + (data.Segundo_nombre || '');
                        document.getElementById('primerApeSoli').value = data.Apellido_paterno;
                        document.getElementById('segundoApeSoli').value = data.Apellido_materno;
                    } else if (data.Tipo === 'Empresa') {
                        nombreCompleto = data.Nombre_comercial || data.Nombre; // Ajusta según tus datos
                        document.getElementById('primerApeSoli').value = '.';
                        document.getElementById('segundoApeSoli').value = '.';
                    }

                    document.getElementById('nombresSoli').value = nombreCompleto;
                }

                
            }catch(error){
                console.error('Error:', error);

            }
        }

        async function accionContinuar(){
            const datosPersonales = document.getElementById('pills-datos-personales-tab');
            const datosContacto = document.getElementById('pills-datos-contacto-tab');
            const identificacion = document.getElementById('pills-identificacion-tab');
            const resumen = document.getElementById('pills-resumen-tab');

            const contenidoPersonales = document.getElementById('pills-datos-personales')
            const contenidoContacto = document.getElementById('pills-datos-contacto');
            const contenidoIdentificacion = document.getElementById('pills-identificacion');
            const contenidoResumen = document.getElementById('pills-resumen');

            var btnSiguiente = document.getElementById('btnSiguiente');

            //INI- VARIABLES DE DATOS PERSONALES
            
            var tipoDocSoli = document.getElementById('tipoDocSoli');
            var tipoDocRuc = document.getElementById('tipoDocRuc');
            var nroDocRuc = document.getElementById('nroDocRuc');
            var razonSocialRuc = document.getElementById('razonSocialRuc');

            var nroDocSoli = document.getElementById('nroDocSoli');
            var nombresSoli = document.getElementById('nombresSoli');
            var primerApeSoli = document.getElementById('primerApeSoli');
            var segundoApeSoli = document.getElementById('segundoApeSoli');

            var checkboxSi = document.getElementById('checkboxSi');
            var checkboxNo = document.getElementById('checkboxNo');
            var tipoDocApod = document.getElementById('tipoDocApod');
            var nroDocApod = document.getElementById('nroDocApod');
            var parentescoApod = document.getElementById('parentescoApod');
            var nombresApod = document.getElementById('nombresApod');
            var primerApeApod = document.getElementById('primerApeApod');
            var segundoApeApod = document.getElementById('segundoApeApod');
            var departamento = document.getElementById('departamento');
            // FIN - VARIABLES DE DAT...

            // INI - VARIABLES DE DATOS CONTACTO
            var envioCorreo = document.getElementById('envioCorreoContacto');
            var correo = document.getElementById('correoContacto');
            var telefono = document.getElementById('telefonoContacto');
            var provincia = document.getElementById('provincia');
            var distrito = document.getElementById('distrito');
            var direccion = document.getElementById('direccion');
            var referencia = document.getElementById('referencia');
            // FIN - VARIABLES DE DAT...

            // INI - VARIABLES DE IDENTIFICACION DE LA QUEJA O RECLAMO
            var reclamoCheck = document.getElementById('reclamo-checkbox');
            var quejaCheck = document.getElementById('queja-checkbox');
            var tipoProducto = document.getElementById('tipoProducto');
            var motivo = document.getElementById('motivo');
            var subMotivo = document.getElementById('subMotivo');
            var detalleReclamo = document.getElementById('detalleReclamo');
            var pedidosReclamo = document.getElementById('pedidosReclamo');
            // FIN - VARIABLES DE IDENTI...

            // INI - VARIABLES DE RESUMEN
            var tipoDocR = document.getElementById('tipoDocR');
            var nroDocR = document.getElementById('nroDocR');
            var nomApeRazonSR = document.getElementById('nomApeRazonSR');
            
            var tipoDoc2HabR = document.getElementById('tipoDoc2HabR');
            var nroDoc2HabR = document.getElementById('nroDoc2HabR');
            var parentescoHabR = document.getElementById('parentescoHabR');
            var nomApeRazonS2HabR = document.getElementById('nomApeRazonS2HabR');

            var tipoDoc2R = document.getElementById('tipoDoc2R');
            var nroDoc2R = document.getElementById('nroDoc2R');
            var parentescoR = document.getElementById('parentescoR');
            var nomApeRazonS2R = document.getElementById('nomApeRazonS2R');
            
            var envioCorreoR = document.getElementById('envioCorreoR');
            var correoR = document.getElementById('correoR');
            var telfR = document.getElementById('telfR');
            var departamentoR = document.getElementById('departamentoR');
            var provinciaR = document.getElementById('provinciaR');
            var distritoR = document.getElementById('distritoR');
            var direccionR = document.getElementById('direccionR');
            var referenciaR = document.getElementById('referenciaR');
            var tipoCasoR = document.getElementById('tipoCasoR');
            var tipoProductoR = document.getElementById('tipoProductoR');
            var motivoR = document.getElementById('motivoR');
            var subMotivoR = document.getElementById('subMotivoR');
            var detalleReclamoR = document.getElementById('detalleReclamoR');
            var pedidosReclamoR = document.getElementById('pedidosReclamoR');
            // FIN - VARIABLES DE R...

            if(contenidoPersonales.classList.contains('active')){

                if(tipoDoc.value == "9"){ //RUC
                    if(tipoDocRuc.value.trim() == "" || nroDocRuc.value.trim() == "" || razonSocialRuc.value.trim() == "" || tipoDocApod.value == "" || nroDocApod.value.trim() == "" || nombresApod.value.trim() == "" || primerApeApod.value.trim() == "" || segundoApeApod.value.trim() == ""){
                        return;
                    }
                }else { // PROCESO NORMAL
                    if(nroDocSoli.value.trim() == "" || nombresSoli.value.trim() == "" || primerApeSoli.value.trim() == "" || segundoApeSoli.value.trim() == ""){
                        return;
                    }

                    if(checkboxSi.checked){
                        if(tipoDocApod.value == "" || nroDocApod.value.trim() == "" || parentescoApod.value.trim() == "" || nombresApod.value.trim() == "" || primerApeApod.value.trim() == "" || segundoApeApod.value.trim() == ""){
                            return;
                        }
                    }
                }
                
                document.getElementById('loader').style.display = '';

                datosPersonales.classList.remove('active');
                datosContacto.classList.add('active');
                contenidoPersonales.classList.remove('show','active');
                contenidoContacto.classList.add('show','active');

                if(departamento.value.trim() == ''){
                    await listarDepartamento();
                }

                document.getElementById('loader').style.display = 'none';

            }else if(contenidoContacto.classList.contains('active')){

                if(envioCorreo.value == "" || correo.value.trim() == "" || telefono.value.trim() == "" || departamento.value == "" || provincia.value == "" || distrito.value == "" || direccion.value.trim() == "" || envioCorreo.value == 2 && referencia.value.trim() == ""){
                    return;
                }

                document.getElementById('loader').style.display = '';
                
                datosContacto.classList.remove('active');
                identificacion.classList.add('active');
                contenidoContacto.classList.remove('show', 'active');
                contenidoIdentificacion.classList.add('show', 'active');

                if(!reclamoCheck.checked && !quejaCheck.checked){
                    reclamoCheck.checked = true;
                }

                if(motivo.value.trim() == ''){
                    await listarMotivo();
                }

                document.getElementById('loader').style.display = 'none';

            }else if(contenidoIdentificacion.classList.contains('active')){

                

                if(!reclamoCheck.checked && !quejaCheck.checked || tipoProducto.value == "" || motivo.value == "" || subMotivo.value == "" || detalleReclamo.value.trim() == "" || pedidosReclamo.value.trim() == ""){
                    return;
                }
                document.getElementById('loader').style.display = '';

                identificacion.classList.remove('active');
                resumen.classList.add('active');
                contenidoIdentificacion.classList.remove('show', 'active');
                contenidoResumen.classList.add('show', 'active');

                if(tipoDoc.value == "9"){
                    tipoDoc2HabR.style.display = '';
                    nroDoc2HabR.style.display = '';
                    parentescoHabR.style.display = 'none';
                    nomApeRazonS2HabR.style.display = '';
                }else{

                    if(checkboxSi.checked){
                        tipoDoc2HabR.style.display = '';
                        nroDoc2HabR.style.display = '';
                        parentescoHabR.style.display = '';
                        nomApeRazonS2HabR.style.display = '';
                    }else {
                        tipoDoc2HabR.style.display = 'none';
                        nroDoc2HabR.style.display = 'none';
                        parentescoHabR.style.display = 'none';
                        nomApeRazonS2HabR.style.display = 'none';
                    }
                }
                
                tipoDocR.value = tipoDoc.value == "9"? tipoDocRuc.value: tipoDocSoli.value;
                nroDocR.value = tipoDoc.value == "9"? nroDocRuc.value : nroDocSoli.value;
                nomApeRazonSR.value = tipoDoc.value == "9"? razonSocialRuc.value : nombresSoli.value + ' ' + primerApeSoli.value + ' ' + segundoApeSoli.value;
                
                tipoDoc2R.value = tipoDocApod.options[tipoDocApod.selectedIndex].text;   //checkboxSi.checked? tipoDocApod.value : '';
                nroDoc2R.value = nroDocApod.value;  //checkboxSi.checked? nroDocApod.value : '';
                parentescoR.value = parentescoApod.value; //checkboxSi.checked? parentescoApod.value : '';
                nomApeRazonS2R.value = nombresApod.value + ' ' + primerApeApod.value + ' ' + segundoApeApod.value;

                envioCorreoR.value = envioCorreo.value == 1? 'Correo electrónico' : 'Dirección de domicilio';
                correoR.value = correo.value;
                telfR.value = telefono.value;
                departamentoR.value = departamento.options[departamento.selectedIndex].text;
                provinciaR.value = provincia.options[provincia.selectedIndex].text;
                distritoR.value = distrito.options[distrito.selectedIndex].text;
                direccionR.value = direccion.value;
                referenciaR.value = referencia.value;
                tipoCasoR.value = reclamoCheck.checked && !quejaCheck? 'Reclamo' : 'Queja';
                tipoProductoR.value = tipoProducto.options[tipoProducto.selectedIndex].text;
                motivoR.value = motivo.options[motivo.selectedIndex].text;
                subMotivoR.value = subMotivo.options[subMotivo.selectedIndex].text;
                detalleReclamoR.value = detalleReclamo.value;
                pedidosReclamoR.value = pedidosReclamo.value;

                btnSiguiente.innerHTML = "Enviar";

                document.getElementById('loader').style.display = 'none';

            }else if(contenidoResumen.classList.contains('active')){
                document.getElementById('loader').style.display = '';

                await enviarCaso();
                document.getElementById('loader').style.display = 'none';
            }

        }

        async function listarDepartamento(){
            try{
                const response = await fetch(`${reclamo_url}${RECLAMO.listar_departamento}`);
                const data = await response.json();

                const departamento = document.getElementById('departamento');
                const optionSelected = '<option value="" selected disabled >Seleccionar</option>'; 
                departamento.innerHTML = optionSelected;
                data.forEach(doc => {
                    var option = new Option(doc.Nombre, doc.Codigo);
                    departamento.appendChild(option);
                });

            }catch(error){
                console.log(error);
            }
        }

        const selectDepartamento = document.getElementById('departamento');
        selectDepartamento.addEventListener('change', async (event) =>{
            const departamento = event.target.value;
            document.getElementById('loader').style.display = '';
            try{
                const response = await fetch(`${reclamo_url}${RECLAMO.listar_provincia}?departamento=${departamento}`);
                const data = await response.json();

                const provincia = document.getElementById('provincia');
                const optionSelected = '<option value="" selected disabled >Seleccionar</option>'; 
                provincia.innerHTML = optionSelected;
                data.forEach(doc => {
                    var option = new Option(doc.Nombre, doc.Codigo);
                    provincia.appendChild(option);
                });
            }catch(error){
                console.log(error);
            }
            document.getElementById('loader').style.display = 'none';
        });

        const selectProvincia = document.getElementById('provincia');
        selectProvincia.addEventListener('change', async (event) =>{
            const provincia = event.target.value;
            document.getElementById('loader').style.display = '';
            try{
                const response = await fetch(`${reclamo_url}${RECLAMO.listar_distrito}?provincia=${provincia}`);
                const data = await response.json();

                const distrito = document.getElementById('distrito');
                const optionSelected = '<option value="" selected disabled >Seleccionar</option>'; 
                distrito.innerHTML = optionSelected;
                data.forEach(doc => {
                    var option = new Option(doc.Nombre, doc.Codigo);
                    distrito.appendChild(option);
                });
            }catch(error){
                console.log(error);
            }
            document.getElementById('loader').style.display = 'none';
        });

        const selectedEnvioCorreo = document.getElementById('envioCorreoContacto');
        selectedEnvioCorreo.addEventListener('change', async (event) =>{
            const envioCorreo = event.target.value;
            const referencia = document.getElementById('referencia');
            const refValid = document.getElementById('refValid');

            if(envioCorreo == 1){ // Correo
                referencia.placeholder = "Opcional";
                refValid.style.display = "none";
                referencia.removeAttribute('required');
            }else { // Dirección de domicilio
                referencia.placeholder = "Datos obligatorios";
                refValid.style.display = "";
                referencia.setAttribute('required','required');
            }
        });

        const reclamoCheckbox = document.getElementById('reclamo-checkbox');
        const quejaCheckbox = document.getElementById('queja-checkbox');

        reclamoCheckbox.addEventListener('change', async function() {
            if(reclamoCheckbox.checked){
                quejaCheckbox.checked = false;
            }else {
                quejaCheckbox.checked = true;
            }
        });

        quejaCheckbox.addEventListener('change', async function() {
            if(quejaCheckbox.checked){
                reclamoCheckbox.checked = false;
            }else {
                reclamoCheckbox.checked = true;
            }
        });


        async function listarMotivo() {
            try{
                const response = await fetch(`${reclamo_url}${RECLAMO.listar_motivo}`);
                const data = await response.json();

                const motivo = document.getElementById('motivo');
                const optionSelected = '<option value="" selected disabled >Seleccionar</option>'; 
                motivo.innerHTML = optionSelected;
                data.forEach(doc => {
                    var option = new Option(doc.Nombre, doc.Codigo);
                    motivo.appendChild(option);
                });
            }catch(error){
                console.log(error);
            }
        }

        const selectMotivo = document.getElementById('motivo');
        selectMotivo.addEventListener('change', async (event) =>{
            const motivo = event.target.value;
            document.getElementById('loader').style.display = '';
            try{
                const response = await fetch(`${reclamo_url}${RECLAMO.listar_submotivo}?id=${motivo}`);
                const data = await response.json();

                const subMotivo = document.getElementById('subMotivo');
                const optionSelected = '<option value="" selected disabled >Seleccionar</option>'; 
                subMotivo.innerHTML = optionSelected;
                data.forEach(doc => {
                    var option = new Option(doc.Nombre, doc.Codigo);
                    subMotivo.appendChild(option);
                });
            }catch(error){
                console.log(error);
            }
            document.getElementById('loader').style.display = 'none';
        });


        let accumulatedFiles = [];  // Almacena todos los archivos acumulados
        document.getElementById('DocumentFiles').addEventListener('change', function() {
            // Agrega nuevos archivos a la lista acumulada
            accumulatedFiles = accumulatedFiles.concat(Array.from(this.files));

            updateFileList();
        });

        function updateFileList() {
            var fileList = document.getElementById('file-list');
            fileList.innerHTML = '';  // Limpiar la lista para actualizar la visualización

            accumulatedFiles.forEach((file, index) => {
                let li = document.createElement('li');
                li.textContent = file.name + ' ';

                let removeButton = document.createElement('button');
                let img = document.createElement('img');
                img.src = 'https://i.imgur.com/PHUCp8i.png';  // URL de la imagen del botón para eliminar
                img.alt = 'Eliminar';
                removeButton.appendChild(img);

                removeButton.addEventListener('click', function() {
                    // Eliminar el archivo de la lista acumulada
                    accumulatedFiles = accumulatedFiles.filter((_, i) => i !== index);
                    updateFileList();  // Actualizar la lista visualmente y en el input
                });

                li.appendChild(removeButton);
                fileList.appendChild(li);
            });

            // Actualizar el input file con los archivos acumulados
            const dataTransfer = new DataTransfer();
            accumulatedFiles.forEach(file => dataTransfer.items.add(file));
            document.getElementById('DocumentFiles').files = dataTransfer.files;

            // Actualizar el contador de archivos
            document.getElementById('documentosAdjuntosR').textContent = accumulatedFiles.length + ' archivo(s)';
        }

        async function enviarCaso(){

            const tipoDocRuc = document.getElementById('tipoDocRuc');
            const nroDocRuc = document.getElementById('nroDocRuc').value;
            const razonSocialRuc = document.getElementById('razonSocialRuc').value;

            const tEdad = document.getElementById('checkboxSi').checked && !document.getElementById('checkboxNo').checked? "Si" : "No"; 
            const tipoDocSoli = document.getElementById('tipoDocSoli');
            const nroDocSoli = document.getElementById('nroDocSoli').value;
            const nombresSoli = document.getElementById('nombresSoli').value;
            const primerApeSoli = document.getElementById('primerApeSoli').value;
            const segundoApeSoli = document.getElementById('segundoApeSoli').value;
            
            const tipoDocApod = document.getElementById('tipoDocApod');
            const DesTipoDoc2 = String(tipoDocApod.options[tipoDocApod.selectedIndex].innerHTML);
            const nroDocApod = document.getElementById('nroDocApod').value;
            const parentescoApod = document.getElementById('parentescoApod').value;
            const nombresApod = document.getElementById('nombresApod').value;
            const primerApeApod = document.getElementById('primerApeApod').value;
            const segundoApeApod = document.getElementById('segundoApeApod').value;
            
            const correoContacto = document.getElementById('correoContacto').value;
            const envioCorreoContacto = document.getElementById('envioCorreoContacto');
            const DesCarta = String(envioCorreoContacto.options[envioCorreoContacto.selectedIndex].innerHTML);
            const telefonoContacto = document.getElementById('telefonoContacto').value;
            const departamento = document.getElementById('departamento');
            const DesDepartamento = String(departamento.options[departamento.selectedIndex].innerHTML);
            const provincia = document.getElementById('provincia');
            const DesProvincia = String(provincia.options[provincia.selectedIndex].innerHTML);
            const distrito = document.getElementById('distrito');
            const DesDistrito = String(distrito.options[distrito.selectedIndex].innerHTML);
            const direccion = document.getElementById('direccion').value;
            const referencia = document.getElementById('referencia').value;
            const tipoCaso = document.getElementById('reclamo-checkbox').checked && !document.getElementById('queja-checkbox').checked? "1": "9";
            const tipoProducto = document.getElementById('tipoProducto');
            const DesTipoProd = String(tipoProducto.options[tipoProducto.selectedIndex].innerHTML);
            const motivo = document.getElementById('motivo');
            const DesMotivo = String(motivo.options[motivo.selectedIndex].innerHTML);
            const subMotivo = document.getElementById('subMotivo');
            const DesSubMotivo = String(subMotivo.options[subMotivo.selectedIndex].innerHTML);
            const detalleReclamo = document.getElementById('detalleReclamo').value;
            const pedidosReclamo = document.getElementById('pedidosReclamo').value;
            const documentFiles = document.getElementById('DocumentFiles');

            const data = 
            {
                "RepresentaEmpresa": 0,
                "TipoDoc": tipoDoc.value,
                "NroDoc": tipoDoc.value == "9"? nroDocRuc: nroDocSoli,
                "Nombres": tipoDoc.value == "9"? razonSocialRuc: nombresSoli,
                "ApellidoPaterno": tipoDoc.value == "9"? "": primerApeSoli,
                "ApellidoMaterno": tipoDoc.value == "9"? "": segundoApeSoli,
                "Email": correoContacto,
                "Celular": telefonoContacto,
                "uDepartamento": departamento.value,
                "uProvincia": provincia.value,
                "uDistrito": distrito.value,
                "uDireccion": direccion,
                "eRazonSocial": tipoDoc.value == "9"? razonSocialRuc: "",
                "eTipoDoc": "",
                "eNroDoc":"",
                "TipoCaso": tipoCaso,
                "TipoProducto": tipoProducto.value,
                "Motivo": motivo.value,
                "SubMotivo": subMotivo.value,
                "DetalleCaso": detalleReclamo,
                "TipoProductoLib": tipoProducto.value,
                "EnvioNotificacion": envioCorreoContacto.value == "1"? "E": "C",
                "Edad": tEdad,
                "DesTipoDoc": tipoDoc.value == "9"? tipoDocRuc.value: tipoDocSoli.value,
                "Empresa": "No",
                "DesTipoDoc2": DesTipoDoc2,
                "NroDoc2": nroDocApod,
                "Parentesco": parentescoApod,
                "Nombres2": nombresApod,
                "ApellidoPaterno2": primerApeApod,
                "ApellidoMaterno2": segundoApeApod,
                "DesDepartamento": DesDepartamento,
                "DesProvincia": DesProvincia,
                "DesDistrito": DesDistrito,
                "Referencia": referencia,
                "DesCarta": DesCarta,
                "Caso": tipoCaso == "1"? "Reclamo": "Queja",
                "DesTipoProd": DesTipoProd,
                "NroOper":"",
                "Monto":"",
                "DesMotivo": DesMotivo,
                "DesSubMotivo": DesSubMotivo,
                "DesPedido": pedidosReclamo,
                "TieneAdjunto": documentFiles.files.length > 0? "Si": "No"
            };

            try{
                const response = await fetch(`${reclamo_url}${RECLAMO.registro_form}`, {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify(data)
                });

                const responseData = await response.json();
                if(response.ok){
                    await enviarAdjunto(responseData.guid);

                    var primerNombre = data.Nombres.split(' ')[0]; // Extrae solo el primer nombre
                    Swal.fire({
                        title: "¡Información registrada!",
                        html: `Hola <strong>${primerNombre}</strong>, hemos recibido su caso correctamente, 
                                estaremos revisándolo para contactarnos con usted y brindarle una respuesta lo más antes posible.<br>
                                El código y la constancia de creación del caso llegarán a tu correo electrónico registrado.<br>
                                ¡Muchas gracias de parte de la familia <strong>MAF!</strong>`,
                        icon: "success",
                        showConfirmButton: true,
                        confirmButtonColor: 'red', // Cambia el color de fondo del botón si lo deseas
                        allowOutsideClick: false, // Evita que el modal se cierre haciendo clic fuera del modal
                        confirmButtonText: 'Cerrar',}).then((result) => {
                        if (result.value) {
                            window.location.reload();
                        }
                    });
                }else {
                    throw new Error(responseData || 'Error desconocido');
                }
            }catch(error){
                console.log(error);
                Swal.fire({
                    title: "Error al registrar el caso",
                    html: `Lamentablemente ocurrió un error al procesar su solicitud. Por favor, intente de nuevo más tarde.<br><br>Detalle del error: ${error.message}`,
                    icon: "error",
                    confirmButtonColor: 'red',
                    confirmButtonText: 'Cerrar'
                });
            }
        }
        async function enviarAdjunto(casoId) {
            const archivoInput = document.getElementById('DocumentFiles');
            if (archivoInput.files.length === 0) {
                console.log("No hay archivos para enviar.");
                return;
            }

            const formData = new FormData();
            Array.from(archivoInput.files).forEach(file => {
                formData.append('file', file);
                formData.append('filename', file.name);
            });
            formData.append('caseId', casoId);
            formData.append('subject', 'Libro de Reclamaciones MAF PERÚ');

            try {
                const adjuntoResponse = await fetch(`${reclamo_url}${RECLAMO.adjunto}`, {
                    method: 'POST',
                    body: formData
                });

                if (!adjuntoResponse.ok) {
                    throw new Error('Error al adjuntar archivo');
                }
                console.log('Adjunto enviado con éxito');
            } catch (error) {
                console.error('Error enviando adjunto:', error);
            }
        }

    </script>
</body>
</html>
